<view class="generate-frame">
   <view class="camera-frame">
      <camera class="camera-container" animation="{{cameraAni}}" device-position="front">
         <cover-view class="cover">
            <cover-image src="{{generateData.psdUrl}}" animation="{{coverImageAni}}"></cover-image>
         </cover-view>
         <cover-view class="count-down">
            <cover-image
                src="../../../res/interaction/one-outline.png"
                wx:if="{{waitCount === 1}}"
                class="number"></cover-image>
            <cover-image
                src="../../../res/interaction/two-outline.png"
                wx:if="{{waitCount === 2}}"
                class="number"></cover-image>
            <cover-image
                src="../../../res/interaction/three-outline.png"
                wx:if="{{waitCount === 3}}"
                class="number"></cover-image>
            <cover-image src="../../../res/interaction/ready.png"
                   style=" margin-left: -55rpx;"
                   wx:if="{{waitCount > 0}}"
                   class="title"></cover-image>
            <cover-view class="number2" wx:if="{{playCount > 0}}">
               <cover-image src="../../../res/interaction/count-bg.png" mode="widthFix" class="bg"></cover-image>
               <cover-image src="../../../res/interaction/one.png" mode="widthFix" wx:if="{{playCount === 1}}"></cover-image>
               <cover-image src="../../../res/interaction/two.png" mode="widthFix" wx:if="{{playCount === 2}}"></cover-image>
               <cover-image src="../../../res/interaction/three.png" mode="widthFix" wx:if="{{playCount === 3}}"></cover-image>
            </cover-view>
            <cover-image src="../../../res/interaction/recording.png"
                   mode="widthFix"
                   style="width: 210rpx; margin-left: -105rpx;"
                   wx:if="{{playCount > 0}}"
                   class="title"></cover-image>
         </cover-view>
      </camera>
   </view>

   <view class="animation-frame">
      <image src="{{photos}}"
             class="photos"
             animation="{{moveImageAni}}"
             wx:if="{{functType === 1}}">
      </image>
      <video src="{{videos}}"
             class="photos"
             controls="{{false}}"
             autoplay
             loop
             muted
             animation="{{moveImageAni}}"
             wx:if="{{functType === 2}}">
      </video>
      <image src="{{generateData.psdUrl}}"
             animation="{{moveCoverAni}}"
             class="cover"
             bindload="posterLoadDone">
      </image>
   </view>

   <view class="btns-frame" style="bottom: {{showBottom ? '0' : '-140rpx'}}">
      <view class="btn" bindtap="takePhoto">
         <image src="../../../res/interaction/camera.png" mode="widthFix"></image>
         <text>拍照</text>
      </view>
      <view class="btn" bindtap="waitCountDown">
         <image src="../../../res/interaction/video.png" mode="widthFix"></image>
         <text>录像{{waitCount}}</text>
      </view>
   </view>

   <view class="btns-frame" style="bottom: {{showBottom2 ? '0' : '-140rpx'}}">
      <view class="btn2" bindtap="doShare" wx:if="{{canShare}}">
         <image src="../../../res/interaction/share.png" mode="aspectFit"></image>
         <view>分享</view>
         <button class="btn-share"
                 plain
                 open-type="share">分享</button>
      </view>
      <view class="btn2" bindtap="doSave" wx:if="{{functType === 1}}">
         <image src="../../../res/interaction/save.png" mode="aspectFit"></image>
         <view>保存</view>
      </view>
      <view class="btn2" bindtap="tryAnother">
         <image src="../../../res/interaction/camera.png" mode="aspectFit"></image>
         <view>再拍一个</view>
      </view>
      <view class="btn2" bindtap="doRetry">
         <image src="../../../res/interaction/replay.png" mode="aspectFit"></image>
         <view>重拍</view>
      </view>
      <view class="btn2" bindtap="gotoMore">
         <image src="../../../res/interaction/more.png" mode="aspectFit"></image>
         <view>更好玩得</view>
      </view>
      <view class="btn3" bindtap="doBuy" wx:if="{{showBottom2}}">
         <view class="msg-btn">{{btnText}}<text wx:if="{{(functType === 1 && generateData.pricePhoto == 0) || (functType === 2 && generateData.priceVideo == 0)}}">新人免费</text></view>
      </view>
   </view>
</view>

<z-modal wx:if="{{showModal}}" bindtap="closeModal">
   <view class="modal-content">
      <view class="txt1">{{modalContent}}</view>
      <view class="btn">
         <z-button catchtap="btnConfirm">确定</z-button>
      </view>
   </view>
</z-modal>

<canvas canvas-id="firstCanvas" class="draw-frame"></canvas>


<i-message id="message" />