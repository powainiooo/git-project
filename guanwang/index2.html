<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="Keywords" content="">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>比亚迪云服务</title>
    <!-- html5.js for IE less than 9 -->
    <!--[if lt IE 9]>
    <script src="js/html5.js"></script>
    <![endif]-->
    <link href="css/reset.css" rel="stylesheet">
    <link href="css/layout.css" rel="stylesheet">
    <link href="css/idangerous.swiper2.7.6.css" rel="stylesheet">
    <script src="js/jquery-1.9.1.min.js"></script>
    <script src="js/idangerous.swiper2.7.6.min.js"></script>
    <script>
        var imgIndex = 0;
        function loadImg(){
            imgIndex ++;
        }
        function isBroswer () {//检测浏览器内核--返回的是两个key，name：浏览器内核的名称---version：浏览器的版本号
            var _broswer = {};
            var sUserAgent = navigator.userAgent;
            var isOpera = sUserAgent.indexOf("Opera") > -1;
            if (isOpera) {
                //首先检测Opera是否进行了伪装
                if (navigator.appName == 'Opera') {
                    //如果没有进行伪装，则直接后去版本号
                    _broswer.version = parseFloat(navigator.appVersion);
                } else {
                    var reOperaVersion = new RegExp("Opera (\\d+.\\d+)");
                    //使用正则表达式的test方法测试并将版本号保存在RegExp.$1中
                    reOperaVersion.test(sUserAgent);
                    _broswer.version = parseFloat(RegExp['$1']);
                }
                _broswer.opera = true;
                _broswer.name = 'opera';
            }
            var isChrome = sUserAgent.indexOf("Chrome") > -1;
            if (isChrome) {
                var reChorme = new RegExp("Chrome/(\\d+\\.\\d+(?:\\.\\d+\\.\\d+))?");
                reChorme.test(sUserAgent);
                _broswer.version = parseFloat(RegExp['$1']);
                _broswer.chrome = true;
                _broswer.name = 'chrome';
            }
            //排除Chrome信息，因为在Chrome的user-agent字符串中会出现Konqueror/Safari的关键字
            var isKHTML = (sUserAgent.indexOf("KHTML") > -1
                    || sUserAgent.indexOf("Konqueror") > -1 || sUserAgent
                            .indexOf("AppleWebKit") > -1)
                    && !isChrome;
            if (isKHTML) {//判断是否基于KHTML，如果时的话在继续判断属于何种KHTML浏览器
                var isSafari = sUserAgent.indexOf("AppleWebKit") > -1;
                var isKonq = sUserAgent.indexOf("Konqueror") > -1;
                if (isSafari) {
                    var reAppleWebKit = new RegExp("Version/(\\d+(?:\\.\\d*)?)");
                    reAppleWebKit.test(sUserAgent);
                    var fAppleWebKitVersion = parseFloat(RegExp["$1"]);
                    _broswer.version = parseFloat(RegExp['$1']);
                    _broswer.safari = true;
                    _broswer.name = 'safari';
                } else if (isKonq) {
                    var reKong = new RegExp(
                            "Konqueror/(\\d+(?:\\.\\d+(?\\.\\d)?)?)");
                    reKong.test(sUserAgent);
                    _broswer.version = parseFloat(RegExp['$1']);
                    _broswer.konqueror = true;
                    _broswer.name = 'konqueror';
                }
            }
            // !isOpera 避免是由Opera伪装成的IE
            var isIE = sUserAgent.indexOf("compatible") > -1
                    && sUserAgent.indexOf("MSIE") > -1 && !isOpera;
            if (isIE) {
                var reIE = new RegExp("MSIE (\\d+\\.\\d+);");
                reIE.test(sUserAgent);
                _broswer.version = parseFloat(RegExp['$1']);
                _broswer.msie = true;
                _broswer.name = 'msie';
            }
            // 排除Chrome 及 Konqueror/Safari 的伪装
            var isMoz = sUserAgent.indexOf("Gecko") > -1 && !isChrome && !isKHTML;
            if (isMoz) {
                var reMoz = new RegExp("rv:(\\d+\\.\\d+(?:\\.\\d+)?)");
                reMoz.test(sUserAgent);
                _broswer.version = parseFloat(RegExp['$1']);
                _broswer.mozilla = true;
                _broswer.name = 'mozilla';
            }
            return _broswer;
        }

    </script>
</head>

<body onresize="resize()">
<!--顶部导航-->
<header id="header">
    <div class="logo"><img onload="loadImg()" src="images/logo.png"> </div>
    <nav>
        <ul>
            <li><a href="javascript:;" id="btnDownload">APP下载</a> </li>
            <li><a href="javascript:;" id="btnFunc">功能介绍</a> </li>
            <li>
                <a href="javascript:;" id="btnCars">支持车型 <i class="icon-arrow"></i></a>
                <!--汽车列表-->
                <div class="car-list" id="carList">
                    <ul>
                        <li>
                            <img onload="loadImg()" src="images/cars/songMax.jpg">
                            <p>宋MAX</p>
                        </li>
                        <li>
                            <img onload="loadImg()" src="images/cars/tang100.jpg">
                            <p>唐100</p>
                        </li>
                        <li>
                            <img onload="loadImg()" src="images/cars/qin100.jpg">
                            <p>秦100</p>
                        </li>
                        <li>
                            <img onload="loadImg()" src="images/cars/qinEV.jpg">
                            <p>秦EV</p>
                        </li>
                        <li>
                            <img onload="loadImg()" src="images/cars/tang.jpg">
                            <p>唐</p>
                        </li>
                        <li>
                            <img onload="loadImg()" src="images/cars/qin.jpg">
                            <p>秦</p>
                        </li>
                        <li>
                            <img onload="loadImg()" src="images/cars/songDM.jpg">
                            <p>宋DM</p>
                        </li>
                        <li>
                            <img onload="loadImg()" src="images/cars/songEV.jpg">
                            <p>宋EV</p>
                        </li>
                        <li>
                            <img onload="loadImg()" src="images/cars/song.jpg">
                            <p>宋</p>
                        </li>
                        <li>
                            <img onload="loadImg()" src="images/cars/yuan.jpg">
                            <p>元</p>
                        </li>
                        <li>
                            <img onload="loadImg()" src="images/cars/e5.jpg">
                            <p>e5</p>
                        </li>
                        <li>
                            <img onload="loadImg()" src="images/cars/e6.jpg">
                            <p>e6</p>
                        </li>
                        <li>
                            <img onload="loadImg()" src="images/cars/sirui.jpg">
                            <p>思锐</p>
                        </li>
                        <li>
                            <img onload="loadImg()" src="images/cars/surui.jpg">
                            <p>速锐</p>
                        </li>
                        <li>
                            <img onload="loadImg()" src="images/cars/s7.jpg">
                            <p>s7</p>
                        </li>
                    </ul>
                </div>
            </li>
        </ul>
    </nav>
    <div class="phoneNumber"><img onload="loadImg()" src="images/number.png"> </div>
</header>

<!--导航点-->
<ul class="nav-dot" id="navDot">
    <li class="active"></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
</ul>

<!--手机-->
<section class="phone" id="phone">
    <img onload="resize()" src="images/phone.png" id="phoneImg">
    <div class="frame">
        <ul>
            <li><img onload="loadImg()" src="images/phone/index.jpg"> </li>
            <li><img onload="loadImg()" src="images/phone/control.png"> </li>
            <li><img onload="loadImg()" src="images/phone/status.png"> </li>
            <li><img onload="loadImg()" src="images/phone/position.jpg"> </li>
            <li><img onload="loadImg()" src="images/phone/energy.png"> </li>
        </ul>
    </div>
</section>

<div class="index-container swiper-container" id="slide1">
    <div class="swiper-wrapper">
        <div class="swiper-slide wheight bg1">
            <div class="p1-content">
                <div><img onload="loadImg()" src="images/intro1.png"></div>
                <div class="code-frame">
                    <div class="code">
                        <img onload="loadImg()" src="images/Android_code.png">
                        <span>Android 下载</span>
                    </div>
                    <div class="code ios-img">
                        <img onload="loadImg()" src="images/iPhone_code.png">
                        <span>IOS 下载</span>
                    </div>
                </div>
            </div>
            <div class="bg-circle">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
            <div class="arrow-down" id="arrowDown">
                <img onload="loadImg()" src="images/arrow-down1.png" class="rect">
                <img onload="loadImg()" src="images/arrow-down2.png" class="arrow">
            </div>
        </div>
        <div class="swiper-slide wheight p2-page">
            <div class="title"><img onload="loadImg()" src="images/title.png"> </div>
            <div class="p2-container bg2">
                <div class="intro intro2" id="intro2"><img onload="loadImg()" src="images/intro2.png"> </div>
            </div>
        </div>
        <div class="swiper-slide wheight bg3">
            <div class="intro intro3" id="intro3"><img onload="loadImg()" src="images/intro3.png"> </div>
        </div>
        <div class="swiper-slide wheight bg4">
            <div class="intro intro4" id="intro4"><img onload="loadImg()" src="images/intro4.png"> </div>
        </div>
        <div class="swiper-slide wheight bg5">
            <div class="intro intro5" id="intro5"><img onload="loadImg()" src="images/intro5.png"> </div>
        </div>
        <div class="swiper-slide footer" id="footer">
            <span>CopyRight © BYD Company Limited. All rights reserved.</span>
        </div>
    </div>
</div>

<script src="js/jquery.mousewheel.js"></script>
<!--<script src="js/index.js"></script>-->
<script>
    function resize(){
        var phoneWidth = parseInt($("#phoneImg").width());
        var phoneFrameWidth = phoneWidth*302/362;
        var phoneFrameLeft = phoneWidth*29/362;
        var phoneFrameTop = phoneWidth*81/362;
        $("#phone .frame").css({
            "width":phoneFrameWidth,
            "left":phoneFrameLeft,
            "top":phoneFrameTop
        });
        var wh = window.innerHeight||(document.documentElement&&document.documentElement.clientHeight)||document.body.clientHeight;
        $("#slide1 .wheight").height(wh);
    }
    resize();

    //点击下滑
    $("#arrowDown").on('click',function(){
        pageMove('down')
    });

    function phoneImgMove(page){
        $("#phone ul").css('margin-left',-page*100+'%');
    }

    function dotMove(){
        var index = slideIndex == 5 ? 4 : slideIndex;
        $("#navDot li").eq(index).addClass('active').siblings('li').removeClass('active');
    }

    function endMove(){
        var slidePage = slideIndex == 5 ? 4 : slideIndex;
        phoneImgMove(slidePage);
        $(".intro").removeClass('introReset');
        if(slideIndex == 1){
            $("#intro2").addClass('introReset');
        }else if(slideIndex == 2){
            $("#intro3").addClass('introReset');
        }else if(slideIndex == 3){
            $("#intro4").addClass('introReset');
        }else if(slideIndex == 4){
            $("#intro5").addClass('introReset');
        }else if(slideIndex == 5){
            $("#intro5").addClass('introReset');
        }
    }

    $("#btnFunc").on('click',function(){
        pageMove('down');
    });

    $("#btnDownload").on('click',function(){
        $(".code-frame .code").addClass('code-move');
        setTimeout(function(){
            $(".code-frame .code").removeClass('code-move');
        },900)
    });

    var direction;
    var mySwiper1 = new Swiper ('#slide1', {
        mode: 'vertical',
        simulateTouch : false,
        mousewheelControl :false,
        slidesPerView: 'auto',
        speed:1000,
        onSlideChangeStart: function(swiper){
            if(direction == 'down' && slideIndex == 5){
                console.log('bottom slide')
            }else{
                mySwiper1.animating = true;
            }
        },
        onSlideChangeEnd: function(swiper){
            mySwiper1.animating = false
        }
    });
    var slideIndex = 0;
    $('#slide1,#phone').mousewheel(function (event, delta) {
        if(!mySwiper1.animating){
            if(delta == -1){//down
                pageMove('down')
            }else if(delta == 1){//up
                pageMove('up')
            }
        }
    });
    function pageMove(direc){
        var phone = $("#phone");
        console.log(direc+":"+slideIndex);
        direction = direc;
        if(direc == 'down'){
            if(slideIndex < 5) slideIndex ++;
            if(slideIndex == 1){
                phone.addClass('phone-small');
                $("#header").addClass('header-up');
            }else if(slideIndex == 2){
                phone.addClass('phone-right');
            }else if(slideIndex == 3){
                phone.removeClass('phone-right');
                phone.addClass('phone-left');
            }else if(slideIndex == 4){
                phone.removeClass('phone-left');
                phone.addClass('phone-right');
            }else if(slideIndex == 5){
                mySwiper1.params.speed = 400;
                phone.removeClass('phone-right');
                phone.addClass('phone-bottom');
//                setTimeout(function(){
//                    mySwiper1.animating = false
//                },500)
            }
            mySwiper1.swipeNext();
        }else if(direc == 'up'){
            if(slideIndex > 0) slideIndex --;
            if(slideIndex == 0){
                phone.removeClass('phone-small');
                $("#header").removeClass('header-up');
            }else if(slideIndex == 1){
                phone.removeClass('phone-right');
                phone.addClass('phone-small');
            }else if(slideIndex == 2){
                phone.addClass('phone-right');
                phone.removeClass('phone-left');
            }else if(slideIndex == 3){
                phone.addClass('phone-left');
                phone.removeClass('phone-right2');
                mySwiper1.params.speed = 1000;
            }else if(slideIndex == 4){
                phone.addClass('phone-right2');
                phone.removeClass('phone-bottom');
            }
            mySwiper1.swipePrev();
        }
        dotMove();
        setTimeout(function(){
            endMove(slideIndex);
        },mySwiper1.params.speed+200);
    }
</script>
</body>
</html>